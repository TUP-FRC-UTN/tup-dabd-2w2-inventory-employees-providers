<div class="card">
    <div class="card-body">
<div class="m-4">
  @if(!isEdit){
      <h2 class="mb-4">Registrar Empleado:</h2>
  }
  @else {
      <h2 class="mb-4">Modificar Empleado:</h2>
  }
  <form [formGroup]="employeeForm" (submit)="saveEmployee()" class="mt-3">
      <div class="row mb-3">
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="firstName" class="form-label">Nombre:</label>
                  <input type="text" formControlName="firstName" class="form-control" id="firstName" placeholder="Ingrese el nombre">
              </div>
          </div>
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="lastName" class="form-label">Apellido:</label>
                  <input type="text" formControlName="lastName" class="form-control" id="lastName" placeholder="Ingrese el apellido">
              </div>
          </div>
      </div>
      <div class="row mb-3">
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="employeeType" class="form-label">Tipo:</label>
                  <select formControlName="employeeType" class="form-select" id="employeeType">
                      @for (type of employeeTypes; track $index) {
                          <option value="{{type}}">{{type}}</option>
                      }
                  </select>
              </div>
          </div>
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="hiringDate" class="form-label">Fecha de Contratación:</label>
                  <input formControlName="hiringDate" type="date" class="form-control" id="hiringDate" />
              </div>
          </div>
      </div>
      <div class="row mb-3">
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="documentType" class="form-label">Tipo de Documento:</label>
                  <select formControlName="documentType" class="form-select" id="documentType">
                      @for (type of documentTypes; track $index) {
                          <option value="{{type}}">{{type}}</option>
                      }
                  </select>
              </div>
          </div>
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="docNumber" class="form-label">Documento:</label>
                  <input type="text" formControlName="docNumber" class="form-control" id="docNumber" placeholder="Ingrese el número de documento">
                  <!-- @if (employeeForm.get('docNumber')) {
                  <div class="text-danger">
                    Este número de documento ya está registrado.
                  </div>
                } -->
                </div>
          </div>
      </div>
      <div class="row mb-4">
          <div class="col-md-6">
              <div class="d-flex justify-content-between align-items-center">
                  <label for="salary" class="form-label">Salario:</label>
                  <div class="input-group ms-2">
                      <span class="input-group-text">$</span>
                      <input type="number" formControlName="salary" class="form-control" id="salary" placeholder="Ingrese el salario">
                  </div>
              </div>
          </div>
      </div>
      <div class="d-flex justify-content-between">
          <button type="button" class="btn btn-secondary" (click)="return()">Cancelar</button>
          @if(employeeForm.valid){
              <button type="submit" class="btn btn-primary">Guardar</button>
          }
          @else {
              <button type="submit" class="btn btn-primary" disabled>Guardar</button>
          }
      </div>
      <div class="d-flex justify-content-end">
        <button class="btn btn-secondary ms-3 custom-button" (click)="showInfo()">
            <i class="bi bi-info-circle"></i>
        </button>
    </div>
  </form>
</div>

<ng-template #infoModal let-modal>
    <div class="modal-header fs-6 py-1">
        <h4 class="modal-title">Formulario de Empleados</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
      </div>
      <div class="modal-body fs-6 py-2">
        <div class="container-fluid">
          <!-- Introducción -->
          <div class="alert alert-info mb-2 py-2">
            <h5 class="alert-heading">¿Qué es esta pantalla?</h5>
            <p class="mb-0 small">Esta pantalla te permite registrar/actualizar un empleado.</p>
          </div>
      
          <!-- Campos Principales -->
          <div class="card mb-2">
            <div class="card-header py-1">
              <h5 class="mb-0">Datos de Empleados</h5>
            </div>
            <div class="card-body py-2">
              <ul class="list-group list-group-flush">
                <li class="list-group-item py-1">
                  <strong>Campos a ingresar:</strong> Se solicitarán: Nombre, Apellido, Tipo, Documento, Tipo de Documento, Salario y Fecha de Contratación.
                </li>
                <li class="list-group-item py-1">
                    <strong>ATENCIÓN:</strong> La opción de GUARDAR solo se habilitará si todos los campos se encuentran correctamente completados.
                  </li>
              </ul>
            </div>
          </div>
      
          <!-- Acciones -->
          <div class="card mb-2">
            <div class="card-header py-1">
              <h5 class="mb-0">Acciones Disponibles</h5>
            </div>
            <div class="card-body py-2">
              <ul class="list-group list-group-flush">
                <li class="list-group-item py-1">
                  <strong>Guardar:</strong> En caso de que todos los campos se encuentren correctamente completados se guardará el nuevo empleado.
                </li>
                <li class="list-group-item py-1">
                  <strong>Cancelar:</strong> Se cancela el registro o la actualización del empleado y nos devuelve al listado de empleados.
                </li>
              </ul>
            </div>
          </div>
      
          <!-- Nota (OPCIONAL) -->
          <div class="alert alert-warning py-2 mb-0">
            <h5 class="alert-heading">Nota:</h5>
            <p class="mb-0 small">Asegúrate de verificar la información antes de modificar, ingresar o eliminar un empleado.</p>
          </div>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-primary" (click)="modal.close()">Entendido</button>
      </div>
      
  </ng-template>
