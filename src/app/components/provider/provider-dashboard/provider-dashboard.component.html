<app-main-container title="Dashboard de Proveedores">

    <!-- Header con búsqueda y filtros -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <!-- Sección de búsqueda y filtros -->
      <div class="input-group w-25">
        <span class="input-group-text">
          <i class="bi bi-search"></i>
        </span>
        <input type="text" class="form-control" placeholder="Buscar..." [formControl]="searchFilterAll" />
        <button type="button" class="btn btn-outline-info" (click)="openModalFilter()">
          <i class="bi bi-funnel-fill"></i>
        </button>
      </div>
    </div>
  
    <!-- Modal de Filtros -->
    <div *ngIf="showModalFilter" class="modal fade show" tabindex="-1" role="dialog" style="display: block;">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Filtrar Proveedores</h5>
            <button type="button" class="btn-close" aria-label="Close" (click)="closeModalFilter()"></button>
          </div>
          <div class="modal-body">
            <form [formGroup]="filterForm">
              <div class="form-group">
                <label>Nombre</label>
                <input type="text" class="form-control" placeholder="Nombre" formControlName="name">
              </div>
              <div class="form-group">
                <label>CUIL</label>
                <input type="text" class="form-control" placeholder="CUIL" formControlName="cuil">
              </div>
              <div class="form-group">
                <label>Servicio</label>
                <input type="text" class="form-control" placeholder="Servicio" formControlName="service">
              </div>
              <div class="form-group">
                <label>Número de Teléfono</label>
                <input type="text" class="form-control" placeholder="Número de Teléfono" formControlName="phone">
              </div>
              <div class="form-group">
                <label>Estado</label>
                <select class="form-select" formControlName="enabled">
                  <option value="">Todos los Estados</option>
                  <option [value]="true">Activo</option>
                  <option [value]="false">Inactivo</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-danger" (click)="clearFilters()">
              <i class="bi bi-trash"></i></button>
            <button type="button" class="btn btn-primary" (click)="applyFilters()">Aplicar Filtros</button>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Métricas -->
    <div class="container mt-5">
      <h3>Métricas de Proveedores</h3>
      <div class="row">
        <div class="col-md-3">
          <!-- Gráfico de torta -->
          <canvas #pieChart></canvas>
        </div>
        <div class="col-md-3">
          <p><strong>Total Proveedores:</strong> {{ providerList.length }}</p>
          <p><strong>Proveedores Activos:</strong> {{ activeCount }}</p>
          <p><strong>Proveedores Inactivos:</strong> {{ inactiveCount }}</p>
        </div>
        <div class="col-md-6">
          <!-- Canvas para el gráfico de barras -->
          <h5>Proveedores por Tipo de Servicio</h5>
          <canvas id="barChart"></canvas>
        </div>
      </div>
    </div>
  
  </app-main-container>
  